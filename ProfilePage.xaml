<Page x:Class="Theater.ProfilePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Theater"
      mc:Ignorable="d" 
      d:DesignHeight="800" d:DesignWidth="1050"
      Title="ProfilePage" Loaded="OnLoad">

    <Grid d:Background="#FF242740">
        <Grid.RowDefinitions>
            <RowDefinition Height="320"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <Border Margin="25" Style="{StaticResource CardBorder}" Width="Auto">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Image Width="250" Height="250">
                    <Image.Clip>
                        <RectangleGeometry Rect="0,0,250,250" RadiusX="125" RadiusY="125"/>
                    </Image.Clip>
                </Image>
                <StackPanel Grid.Column="1" Margin="10 0">
                    <TextBlock FontSize="32" Foreground="White" Text="{Binding Path=currentUser.Name}" TextWrapping="WrapWithOverflow"/>
                    <TextBlock FontSize="18" Foreground="LightSlateGray" Text="{Binding Path=currentUser.Email}"/>
                    <TextBlock FontSize="18" Foreground="Gray" Text="{Binding Path=currentUser.CreatedAtStr}"/>
                    <Button Style="{StaticResource Button}" Foreground="Wheat" FontSize="18" Content="Выйти из аккаунта" HorizontalAlignment="Left"/>
                </StackPanel>
                <StackPanel Grid.Column="2" Margin="10 0" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock FontSize="42" FontWeight="Bold" Foreground="Goldenrod" Text="32 700 ₽" HorizontalAlignment="Center"/>
                    <TextBlock FontSize="18" Foreground="LightSlateGray" Text="Всего потрачено" HorizontalAlignment="Center"/>
                    <TextBlock FontSize="42" FontWeight="Bold" Foreground="Goldenrod" Text="{Binding Path=currentUser.Tickets.Count}" HorizontalAlignment="Center"/>
                    <TextBlock FontSize="18" Foreground="LightSlateGray" Text="Куплено билетов" HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>

        <ScrollViewer Margin="12.5 0" Grid.Row="1" VerticalScrollBarVisibility="Hidden"
                      HorizontalScrollBarVisibility="Disabled" VerticalAlignment="Top">
            <ItemsControl ItemsSource="{Binding Path=currentUser.OrderViews}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource CardBorder}" Width="Auto" Height="200">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Image VerticalAlignment="Top" HorizontalAlignment="Left"
                                       Width="180" Height="180">
                                    <Image.Clip>
                                        <RectangleGeometry Rect="0,0,180,180" RadiusX="10" RadiusY="10"/>
                                    </Image.Clip>
                                </Image>
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="{Binding Title}" FontSize="24" Foreground="White"/>
                                    <TextBlock Text="{Binding Date}" FontSize="20" Foreground="LightSlateGray"/>
                                    <TextBlock FontSize="20" Foreground="LightSlateGray">
                                        <Run Text="Зал: "/>
                                        <Run Text="{Binding Hall}"/>
                                    </TextBlock>
                                    <TextBlock TextWrapping="WrapWithOverflow" FontSize="20" Foreground="DimGray">
                                        <Run Text="Места: "/>
                                        <Run Text="{Binding Seats}"/>
                                    </TextBlock>
                                </StackPanel>

                                <Grid Grid.Column="2" Margin="0,0,10,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    <StackPanel HorizontalAlignment="Right">
                                        <TextBlock FontSize="30" Foreground="Goldenrod" FontWeight="SemiBold" HorizontalAlignment="Right">
                                            <Run Text="{Binding Price}"/>
                                            <Run Text="₽"/>
                                        </TextBlock>
                                        <TextBlock Text="Итоговая цена" FontSize="20" Foreground="White" HorizontalAlignment="Right"/>
                                    </StackPanel>
                                    <Button Grid.Row="1" Style="{StaticResource BuyButton}" HorizontalAlignment="Right"
                                            Width="240" Height="60" Content="Перейти на страницу спектакля"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page>
